# Do not edit this file manually.
# This file is auto generated by ./lab.sh.
# To change this file edit files located in: "./etc/services/".
# Afterwards restart the lab.
version: '3.7'

# Basic function options
x-victim: &victim
  labels:
    class: 'victim'
    cluster: 'pentest_lab'
x-red_team: &red_team
  labels:
    class: 'red_team'
    cluster: 'pentest_lab'
networks:
  pentest_lab:
    driver: bridge
    ipam:
      config:
        - subnet: 10.5.0.0/24
services:
  # Default attack system.
  kali:
    <<: *red_team
    build:
      context: ./
      dockerfile: dockerfiles/kali
    networks:
      pentest_lab:
        ipv4_address: 10.5.0.5
    hostname: kali
    volumes:
      - kali-data:/root/Documents  
  bwapp:
    labels:
      class: 'victim'
      cluster: 'pentest_lab'
      level: 'beginner'
    image: raesene/bwapp
    ports:
      - '9100:80'
    networks:
      pentest_lab:
        ipv4_address: 10.5.0.100
    hostname: bwapp
    volumes:
      - bwapp-data:/var/lib/mysql  
  dvwa:
    labels:
      class: 'victim'
      cluster: 'pentest_lab'
      level: 'beginner'
    image: vulnerables/web-dvwa
    ports:
      - '9110:80'
    networks:
      pentest_lab:
        ipv4_address: 10.5.0.101
    hostname: dvwa
volumes:
  kali-data:
  bwapp-data:
  dvwa:
  bwapp: